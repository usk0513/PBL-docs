---
marp: true
theme: default
paginate: true
---

<!-- _class: lead -->

# アジャイル開発PBL
## 第2回：開発環境を理解する

### 〜なぜ「環境」が大切なのか〜

---

## 今日のゴール

- 🤔 **なぜ**複数の環境が必要なのかを理解する
- 🏗️ プロジェクトの**アーキテクチャ**を把握する
- 🐳 **Docker**でローカル環境を構築できる
- 👥 チーム開発の**ルール**を決める
- 💡 環境の問題を**自分で発見・解決**できる

---

<!-- _class: lead -->

## 第1部
### なぜ「環境」の話をするのか？

---

## 質問：こんな経験ありませんか？

- 「私のPCでは動くのに...」😰
- 「昨日まで動いてたのに...」😱
- 「チームメイトのPCでは動かない...」😭

**これらは全て「環境」の問題です**

---

## 環境とは何か？

### コードが動作する「舞台」

```
あなたのコード
    ↓
  【環境】← ここが違うと...
    ↓
  実行結果
```

**環境 = OS + ツール + 設定 + データ**

---

## 実験してみよう 🧪

### Python実行結果の違い

```python
# team_member_a.py
import sys
print(f"Python: {sys.version}")
print(f"OS: {sys.platform}")
```

**Mac**: `Python: 3.11.0 | OS: darwin`
**Windows**: `Python: 3.9.0 | OS: win32`

→ **同じコードでも結果が違う！**

---

## 企業での開発を想像してみよう

### 120人の学生 = 小規模な会社

- Aさん: Windows 11 + Python 3.9
- Bさん: macOS Sonoma + Python 3.11
- Cさん: Ubuntu 22.04 + Python 3.10
- ...

**全員違う環境 → カオス！** 🌪️

---

## なぜ複数の環境が必要？

### 段階的なリスク管理

```
開発環境 → テスト環境 → 本番環境
  ↓          ↓           ↓
自由に実験   品質確認    お客様が使う
```

**質問**: 本番環境で直接開発したらどうなる？

---

## 環境がバラバラだと

### 実際に起きる問題

1. **時間の無駄** ⏰
   - 「動かない」の調査に3時間...

2. **品質低下** 📉
   - テストが通らない

3. **リリース失敗** 💥
   - 本番で初めて発覚するバグ

---

<!-- _class: lead -->

## 第2部
### プロジェクトのアーキテクチャ

---

## 全体構成

```
┌─────────────────────────────────┐
│     オンプレミスサーバー (Ubuntu)    │
├─────────────────────────────────┤
│  ┌──────────┐  ┌──────────┐    │
│  │本番環境VM│  │開発環境VM│ ×20 │
│  └──────────┘  └──────────┘    │
└─────────────────────────────────┘
         ↑              ↑
    ユーザーアクセス  チーム開発
```

---

## 各環境の役割

### 🏠 ローカル環境（あなたのPC）
- 自由に実験できる個人の作業場

### 🔧 開発環境（チームVM）
- チームメンバーと共有する作業場

### 🎯 本番環境
- 完成したプロダクトを動かす場所

---

## リポジトリ構成

### 全チーム共通リポジトリ

```
project-root/
├── team01/     # チーム1のディレクトリ
│   └── ...
├── team02/     # チーム2のディレクトリ
│   └── ...
├── team03/     # チーム3のディレクトリ
│   └── ...
└── shared/     # 共通リソース
```

**なぜ？** → 実際の企業での開発を体験。

---

## チームディレクトリ構成

```
team01/
├── requirements/       # 依存関係
│   ├── base.txt
│   └── local.txt
├── src/               # ソースコード
│   ├── manage.py
│   └── project/
├── tests/             # テスト
├── docs/              # ドキュメント
└── docker/            # Docker設定
```

---

<!-- _class: lead -->

## 第3部
### 技術スタック

---

## Django - なぜ選ぶのか？

### 👍 メリット
- Pythonで書ける（授業で学習済み）
- フルスタックフレームワーク
- 管理画面が自動生成

### 🤔 考えてみよう
- 他にどんなフレームワークがある？
- なぜDjangoが適している？

---

## プロジェクト設定の工夫

### 環境ごとの設定分離

```python
# settings/base.py
DEBUG = False  # デフォルトは本番想定

# settings/local.py
from .base import *
DEBUG = True   # ローカルではデバッグON
```

**質問**: なぜ設定を分ける必要がある？

---

<!-- _class: lead -->

## 第4部
### ローカル開発環境

---

## Docker - 環境統一の切り札

### Dockerがない世界 😱
```
「Python 3.11をインストールして...」
「PostgreSQL 15をインストールして...」
「Redisもインストールして...」
「環境変数を設定して...」

→ 120人が120通りの方法で設定
```

---

## Docker がある世界 🐳

### たった2コマンドで完了

```bash
# 1. イメージをビルド
Docker-compose build

# 2. コンテナを起動
Docker-compose up
```

**全員が同じ環境で開発できる！**

---

## Docker-compose.yml

```yaml
version: '3.8'
services:
  web:
    build: .
    ports:
      - "8000:8000"
    volumes:
      - .:/code
    environment:
      - DEBUG=True
  db:
    image: postgres:15
    environment:
      - POSTGRES_DB=myapp
```

---

## Dockerfileの基本

```dockerfile
FROM python:3.11-slim

WORKDIR /code

# 依存関係をインストール
COPY requirements.txt .
RUN pip install -r requirements.txt

# アプリケーションコード
COPY . .

CMD ["python", "manage.py", "runserver", "0.0.0.0:8000"]
```

---

## 重要：Dockerは選択肢の一つ

### 他の方法でもOK

- **venv** (Python仮想環境)
- **pyenv** (Python バージョン管理)
- **Vagrant** (仮想マシン)
- **devcontainer** (VS Code)

**大切なのは「チーム全員が同じ環境」であること**

---

<!-- _class: lead -->

## 第5部
### 演習：環境の違いを体験しよう

---

## 演習1：環境の違いを発見

### 🔍 調査ミッション

1. チームメンバーの環境を調査
   ```bash
   python --version
   pip list
   echo $PATH  # Mac/Linux
   echo %PATH% # Windows
   ```

2. 違いをドキュメント化
3. 問題になりそうな点を予測

**時間**: 15分。

---

## 演習2：Docker環境の構築

### 🐳 実践ミッション

1. 提供されたDockerfileを理解
2. Docker-compose.ymlを編集
3. コンテナを起動
4. 動作確認

**ヒント**: エラーが出たら。
- エラーメッセージを読む
- チームで相談
- ググる力も大切！

---

## 演習3：環境問題の解決

### 💡 トラブルシューティング

**シナリオ**:
「チームメンバーのPCで動かない！」

1. 何が原因か仮説を立てる
2. 調査方法を考える
3. 解決策を実装
4. ドキュメントに残す

---

## 振り返り：発見したこと

### チームで共有しよう

- 🤔 予想外だったこと
- 💡 気づいたこと
- 🎯 改善できそうなこと

失敗は学習のチャンスです。

---

## 環境管理のベストプラクティス

### 覚えておくべき3つの原則

1. **Documentation as Code**
   - 環境構築手順をコード化

2. **Version Everything**
   - 全てをバージョン管理

3. **Fail Fast**
   - 問題は早期発見・早期解決

---

## 次回に向けて

### 宿題 📝

1. **個人タスク**
   - Dockerをインストール
   - サンプルプロジェクトを動かす

2. **チームタスク**
   - 開発環境のルールを決める
   - README.mdに環境構築手順を書く

---

## まとめ

### 今日学んだこと

✅ 環境の重要性を理解した
✅ プロジェクト構成を把握した
✅ Dockerの基本を学んだ
✅ チーム開発の準備ができた

**次回**: モブプログラミングで実践。

---

<!-- _class: lead -->

## 質問タイム

### 🤔 わからないことは今聞こう

### 環境構築は最初が肝心
### 一度理解すれば一生使える知識

---

## 参考資料

- 📚 [Django公式ドキュメント](https://docs.djangoproject.com/)
- 🐳 [Docker公式ドキュメント](https://docs.docker.com/)
- 🔧 [Python環境構築ガイド](https://www.python.jp/install/install.html)

### Slackチャンネル
`#environment-help` で質問歓迎！

---

<!-- _class: lead -->

## Let's Build Together! 🚀

### 環境を制する者は開発を制す
